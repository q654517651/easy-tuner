# GitHub Release è‡ªåŠ¨æ›´æ–°æŒ‡å—

æœ¬é¡¹ç›®å·²é…ç½® GitHub Actions è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒï¼Œä»¥åŠ Electron è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ã€‚

## ğŸ“¦ åŠŸèƒ½æ¦‚è¿°

- âœ… è‡ªåŠ¨æ„å»ºåç«¯ï¼ˆPyInstallerï¼‰å’Œå‰ç«¯ï¼ˆElectronï¼‰
- âœ… è‡ªåŠ¨å‘å¸ƒåˆ° GitHub Release
- âœ… åº”ç”¨å†…è‡ªåŠ¨æ£€æŸ¥æ›´æ–°
- âœ… å¢é‡æ›´æ–°æ”¯æŒï¼ˆèŠ‚çœä¸‹è½½æµé‡ï¼‰
- âœ… ç”¨æˆ·å‹å¥½çš„æ›´æ–°é€šçŸ¥ç•Œé¢

## ğŸš€ å‘å¸ƒæ–°ç‰ˆæœ¬

### 1. æ›´æ–°ç‰ˆæœ¬å·

ä¿®æ”¹ `web/package.json` ä¸­çš„ç‰ˆæœ¬å·ï¼š

```json
{
  "version": "0.0.2"  // ä» 0.0.1 æ”¹ä¸º 0.0.2
}
```

### 2. æäº¤æ›´æ”¹å¹¶åˆ›å»ºæ ‡ç­¾

```bash
# æäº¤æ‰€æœ‰æ›´æ”¹
git add .
git commit -m "chore: bump version to 0.0.2"

# åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾ï¼ˆå¿…é¡»ä»¥ v å¼€å¤´ï¼‰
git tag v0.0.2
git push origin master
git push origin v0.0.2
```

### 3. è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ

æ¨é€æ ‡ç­¾åï¼ŒGitHub Actions ä¼šè‡ªåŠ¨ï¼š
1. æ„å»º Python åç«¯ï¼ˆPyInstallerï¼‰
2. æ„å»ºå‰ç«¯å¹¶æ‰“åŒ… Electron åº”ç”¨
3. åˆ›å»º GitHub Release
4. ä¸Šä¼ å®‰è£…åŒ…å’Œæ›´æ–°é…ç½®æ–‡ä»¶

æŸ¥çœ‹æ„å»ºè¿›åº¦ï¼šhttps://github.com/q654517651/easy-tuner/actions

### 4. å‘å¸ƒå®Œæˆå

æ„å»ºæˆåŠŸåï¼Œåœ¨ GitHub Release é¡µé¢å¯ä»¥çœ‹åˆ°ï¼š
- `EasyTuner Setup 0.0.2.exe` - å®Œæ•´å®‰è£…åŒ…
- `EasyTuner Setup 0.0.2.exe.blockmap` - å¢é‡æ›´æ–°æ–‡ä»¶
- `latest.yml` - æ›´æ–°é…ç½®æ–‡ä»¶

## ğŸ”„ è‡ªåŠ¨æ›´æ–°å·¥ä½œæµç¨‹

### ç”¨æˆ·ç«¯æ›´æ–°æµç¨‹

1. **å¯åŠ¨åº”ç”¨** â†’ 5 ç§’åè‡ªåŠ¨æ£€æŸ¥æ›´æ–°
2. **å‘ç°æ–°ç‰ˆæœ¬** â†’ æ˜¾ç¤ºæ›´æ–°å¼¹çª—ï¼ŒåŒ…å«ç‰ˆæœ¬å·å’Œæ›´æ–°æ—¥å¿—
3. **ç”¨æˆ·ç¡®è®¤** â†’ ç‚¹å‡»"ç«‹å³ä¸‹è½½"å¼€å§‹ä¸‹è½½
4. **æ˜¾ç¤ºè¿›åº¦** â†’ å®æ—¶æ˜¾ç¤ºä¸‹è½½è¿›åº¦å’Œé€Ÿåº¦
5. **ä¸‹è½½å®Œæˆ** â†’ æç¤ºç”¨æˆ·"ç«‹å³å®‰è£…"æˆ–"ç¨åå®‰è£…"
6. **å®‰è£…æ›´æ–°** â†’ é€€å‡ºåº”ç”¨å¹¶è‡ªåŠ¨å®‰è£…æ–°ç‰ˆæœ¬

### æ›´æ–°æ£€æŸ¥é€»è¾‘

- **è‡ªåŠ¨æ£€æŸ¥**ï¼šåº”ç”¨å¯åŠ¨å 5 ç§’è‡ªåŠ¨æ£€æŸ¥ï¼ˆä»…ç”Ÿäº§ç¯å¢ƒï¼‰
- **æ‰‹åŠ¨æ£€æŸ¥**ï¼šå¯åœ¨è®¾ç½®é¡µé¢æ·»åŠ "æ£€æŸ¥æ›´æ–°"æŒ‰é’®
- **å¼€å‘æ¨¡å¼**ï¼šå¼€å‘ç¯å¢ƒä¸‹è‡ªåŠ¨è·³è¿‡æ›´æ–°æ£€æŸ¥

## ğŸ“‹ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

```
.github/
  â””â”€â”€ workflows/
      â””â”€â”€ release.yml                         # GitHub Actions å·¥ä½œæµ

web/
  â”œâ”€â”€ src/
  â”‚   â”œâ”€â”€ components/
  â”‚   â”‚   â””â”€â”€ UpdateNotification.tsx          # æ›´æ–°é€šçŸ¥ç»„ä»¶
  â”‚   â””â”€â”€ types/
  â”‚       â””â”€â”€ electron.d.ts                   # TypeScript ç±»å‹å®šä¹‰
  â””â”€â”€ package.json (å·²ä¿®æ”¹)                    # æ·»åŠ å‘å¸ƒé…ç½®

web/electron/
  â”œâ”€â”€ main.ts (å·²ä¿®æ”¹)                        # æ·»åŠ è‡ªåŠ¨æ›´æ–°é€»è¾‘
  â””â”€â”€ preload.ts (å·²ä¿®æ”¹)                     # æ·»åŠ æ›´æ–° API

web/src/shell/
  â””â”€â”€ AppShell.tsx (å·²ä¿®æ”¹)                   # é›†æˆæ›´æ–°é€šçŸ¥ç»„ä»¶
```

## âš™ï¸ é…ç½®è¯´æ˜

### package.json å‘å¸ƒé…ç½®

```json
{
  "build": {
    "publish": [
      {
        "provider": "github",
        "owner": "q654517651",
        "repo": "easy-tuner",
        "releaseType": "release"
      }
    ],
    "nsis": {
      "perMachine": false,              // ç”¨æˆ·çº§å®‰è£…ï¼ˆæ›´æ–°æ›´å®¹æ˜“ï¼‰
      "differentialPackage": true       // å¯ç”¨å¢é‡æ›´æ–°
    }
  }
}
```

### ç¯å¢ƒå˜é‡

GitHub Actions ä½¿ç”¨ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
- `GITHUB_TOKEN` - è‡ªåŠ¨æä¾›ï¼Œç”¨äºå‘å¸ƒ Release

## ğŸ§ª æµ‹è¯•æ›´æ–°åŠŸèƒ½

### æœ¬åœ°æµ‹è¯•

1. å‘å¸ƒç‰ˆæœ¬ `v0.0.1`
2. ä½¿ç”¨ `v0.0.1` å®‰è£…åŒ…å®‰è£…åº”ç”¨
3. å‘å¸ƒç‰ˆæœ¬ `v0.0.2`
4. å¯åŠ¨ `v0.0.1` åº”ç”¨
5. ç­‰å¾… 5 ç§’ï¼Œåº”è¯¥ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° `v0.0.2`

### æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] è‡ªåŠ¨æ£€æŸ¥æ›´æ–°åŠŸèƒ½æ­£å¸¸
- [ ] æ›´æ–°å¼¹çª—æ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬å·å’Œæ›´æ–°æ—¥å¿—
- [ ] ä¸‹è½½è¿›åº¦æ­£ç¡®æ˜¾ç¤º
- [ ] ä¸‹è½½å®Œæˆåæç¤ºå®‰è£…
- [ ] å®‰è£…æˆåŠŸååº”ç”¨æ­£å¸¸å¯åŠ¨
- [ ] ç‰ˆæœ¬å·æ­£ç¡®æ›´æ–°

## ğŸ”§ æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°

å¯ä»¥åœ¨è®¾ç½®é¡µé¢æ·»åŠ "æ£€æŸ¥æ›´æ–°"æŒ‰é’®ï¼š

```tsx
import { Button } from '@heroui/react';

function SettingsPage() {
  const handleCheckUpdate = async () => {
    const result = await window.electron?.updater?.checkForUpdates();
    if (result?.error) {
      console.error('æ£€æŸ¥æ›´æ–°å¤±è´¥:', result.error);
    }
  };

  return (
    <Button onPress={handleCheckUpdate}>
      æ£€æŸ¥æ›´æ–°
    </Button>
  );
}
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ„å»ºå¤±è´¥

**åŸå› **ï¼šåç«¯æˆ–å‰ç«¯æ„å»ºé”™è¯¯
**è§£å†³**ï¼šæŸ¥çœ‹ GitHub Actions æ—¥å¿—ï¼Œä¿®å¤æ„å»ºé”™è¯¯åé‡æ–°æ¨é€æ ‡ç­¾

### 2. æ›´æ–°æ£€æµ‹å¤±è´¥

**åŸå› **ï¼šç½‘ç»œé—®é¢˜æˆ– GitHub API é™åˆ¶
**è§£å†³**ï¼šç¨åé‡è¯•ï¼Œç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸

### 3. å¢é‡æ›´æ–°ä¸ç”Ÿæ•ˆ

**åŸå› **ï¼š`differentialPackage` æœªå¯ç”¨æˆ– `.blockmap` æ–‡ä»¶ç¼ºå¤±
**è§£å†³**ï¼šç¡®ä¿ `package.json` ä¸­ `differentialPackage: true`

### 4. å¼€å‘ç¯å¢ƒæç¤ºä¸æ”¯æŒæ›´æ–°

**åŸå› **ï¼š`app.isPackaged` ä¸º false
**è§£å†³**ï¼šè¿™æ˜¯æ­£å¸¸è¡Œä¸ºï¼Œæ›´æ–°åŠŸèƒ½ä»…åœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆæ‰“åŒ…åï¼‰ç”Ÿæ•ˆ

## ğŸ“š ç‰ˆæœ¬å·è§„èŒƒ

éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemVerï¼‰ï¼š

```
vä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·

v1.0.0 - é¦–ä¸ªç¨³å®šç‰ˆæœ¬
v1.1.0 - æ–°å¢åŠŸèƒ½ï¼ˆå‘åå…¼å®¹ï¼‰
v1.1.1 - Bug ä¿®å¤
v2.0.0 - é‡å¤§å˜æ›´ï¼ˆä¸å‘åå…¼å®¹ï¼‰
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä»£ç ç­¾å**ï¼ˆå¯é€‰ï¼‰ï¼š
   - è´­ä¹°ä»£ç ç­¾åè¯ä¹¦
   - åœ¨ `package.json` ä¸­é…ç½® `certificateFile` å’Œ `certificatePassword`
   - å¯ä»¥é¿å… Windows SmartScreen è­¦å‘Š

2. **ç§æœ‰ä»“åº“**ï¼š
   - å¦‚æœä½¿ç”¨ç§æœ‰ä»“åº“ï¼Œéœ€è¦åœ¨ Actions ä¸­é…ç½® `GH_TOKEN`

3. **Release æƒé™**ï¼š
   - ç¡®ä¿ GitHub Actions æœ‰ Release å†™å…¥æƒé™
   - åœ¨ä»“åº“è®¾ç½®ä¸­æ£€æŸ¥ `Settings > Actions > General > Workflow permissions`

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issueï¼šhttps://github.com/q654517651/easy-tuner/issues

